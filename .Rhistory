TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), .8),],
REML=T)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveAge +
percMale +
aveHomeHealth7dp +
percSOSDhome +
percSOSDassisLiv +
percSOSlongtermcare +
percSOSskilledNurse +
percSOSinpatient +
percSOSinpatientHospice +
EMO_REL_BBV +
EMO_REL_TBV +
RESPECT_BBV +
RESPECT_MBV +
RESPECT_TBV +
SYMPTOMS_BBV +
SYMPTOMS_MBV +
SYMPTOMS_TBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_MBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 100),],
REML=T)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveAge +
percMale +
aveHomeHealth7dp +
percSOSDhome +
percSOSDassisLiv +
percSOSlongtermcare +
percSOSskilledNurse +
percSOSinpatient +
percSOSinpatientHospice +
EMO_REL_BBV +
EMO_REL_TBV +
RESPECT_BBV +
RESPECT_MBV +
RESPECT_TBV +
SYMPTOMS_BBV +
SYMPTOMS_MBV +
SYMPTOMS_TBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_MBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1000),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveAge +
percMale +
aveHomeHealth7dp +
percSOSDhome +
percSOSDassisLiv +
percSOSlongtermcare +
percSOSskilledNurse +
percSOSinpatient +
percSOSinpatientHospice +
EMO_REL_BBV +
EMO_REL_TBV +
RESPECT_BBV +
RESPECT_MBV +
RESPECT_TBV +
SYMPTOMS_BBV +
SYMPTOMS_MBV +
SYMPTOMS_TBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_MBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1000),],
REML=T)
summary(m1)
dim(df)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveAge +
percMale +
aveHomeHealth7dp +
percSOSDhome +
percSOSDassisLiv +
percSOSlongtermcare +
percSOSskilledNurse +
percSOSinpatient +
percSOSinpatientHospice +
EMO_REL_BBV +
EMO_REL_TBV +
RESPECT_BBV +
RESPECT_MBV +
RESPECT_TBV +
SYMPTOMS_BBV +
SYMPTOMS_MBV +
SYMPTOMS_TBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_MBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveAge +
percMale +
aveHomeHealth7dp +
percSOSDhome +
percSOSDassisLiv +
percSOSlongtermcare +
percSOSskilledNurse +
percSOSinpatient +
percSOSinpatientHospice +
EMO_REL_BBV +
EMO_REL_TBV +
RESPECT_BBV +
RESPECT_MBV +
RESPECT_TBV +
SYMPTOMS_BBV +
SYMPTOMS_MBV +
SYMPTOMS_TBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_MBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveAge +
percMale +
aveHomeHealth7dp +
percSOSDhome +
percSOSDassisLiv +
percSOSlongtermcare +
percSOSskilledNurse +
percSOSinpatient +
percSOSinpatientHospice +
EMO_REL_BBV +
EMO_REL_TBV +
RESPECT_BBV +
RESPECT_MBV +
RESPECT_TBV +
SYMPTOMS_BBV +
SYMPTOMS_MBV +
SYMPTOMS_TBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_MBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
TRAINING_MBV +
TRAINING_TBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
days_operation +
Average_Daily_Census +
percRuralZipBen +
aveHomeHealth7dp +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
aveHomeHealth7dp +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens +
epStayCt +
medStanPayPerBen + (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
aveHomeHealth7dp +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens +
epStayCt
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
aveHomeHealth7dp +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
mean(kfold_results$train$mae)
mean(kfold_results$test$mae)
kfold_results = lmer_kfold(df, summary(m1)$call, 10)
mean(kfold_results$train$mae)
mean(kfold_results$test$mae)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens +
medStanPayPerBen
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens +
aveHomeHealth7dp
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
m1 <- lmer(neg_rec ~ Ownership.Type +
percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
saveRDS(m1, 'data/interim/mvp_model.rds')
?fixef
fixef(m0)
fixef(m1)
fixef(m1)[0]
list(fixef(m1))
data.frame(fixef(m1))
fixef(m1)
ranef(m1)
ndata = list(Ownership.Type='Non-Profit',
percRuralZipBen=1,
percSOSinpatientHospice=2,
EMO_REL_BBV=1,
RESPECT_BBV=2,
RESPECT_TBV=1,
SYMPTOMS_BBV=1,
TEAM_COMM_BBV=1,
TEAM_COMM_MBV=1,
TEAM_COMM_TBV=1,
TIMELY_CARE_BBV =2,
TIMELY_CARE_TBV =2,
TRAINING_BBV =1,
distinctBens =.5,
State='MN'
)
predict(m1, ndata)
predict(m1, ndata)
predict(m1, df)
ndata = data.frame(Ownership.Type='Non-Profit',
percRuralZipBen=1,
percSOSinpatientHospice=2,
EMO_REL_BBV=1,
RESPECT_BBV=2,
RESPECT_TBV=1,
SYMPTOMS_BBV=1,
TEAM_COMM_BBV=1,
TEAM_COMM_MBV=1,
TEAM_COMM_TBV=1,
TIMELY_CARE_BBV =2,
TIMELY_CARE_TBV =2,
TRAINING_BBV =1,
distinctBens =.5,
State='MN'
)
predict(m1, ndata)
fixef(m1)
ranef(m1)
matrix(c(1,2,3))
matrix(c(4,5,6))
matrix(c(1,2,3)) %*% matrix(c(4,5,6))
?matrix
matrix(c(1,2,3)) %*% matrix(c(4,5,6),ncol=1)
matrix(c(1,2,3)) %*% matrix(c(4,5,6),nrow=1)
matrix(c(4,5,6),nrow=1) %*% matrix(c(1,2,3))
fixef(m1)
data.frame(fixef(m1))
data.frame(ranef(m1))
ranef(m1)
write.csv(ranef(m1), 'data/interim/fixef.csv')
write.csv(ranef(m1), 'data/interim/ranef.csv')
write.csv(fixef(m1), 'data/interim/fixef.csv')
df
predict(m1, df)
data.frame(predict(m1, df))
head(df)
data.frame(ccn = df$ccn, pred=predict(m1, df))
write.csv(data.frame(ccn = df$ccn, pred=predict(m1, df)),
'data/interim/preds.csv')
m1 <- lmer(neg_rec ~ percRuralZipBen +
percSOSinpatientHospice +
EMO_REL_BBV +
RESPECT_BBV +
RESPECT_TBV +
SYMPTOMS_BBV +
TEAM_COMM_BBV +
TEAM_COMM_MBV +
TEAM_COMM_TBV +
TIMELY_CARE_BBV +
TIMELY_CARE_TBV +
TRAINING_BBV +
distinctBens
+ (1|State),
data=df[sample(nrow(df), 1630),],
REML=T)
summary(m1)
mean(kfold_results$train$mae)
mean(kfold_results$test$mae)
mean(kfold_results$train$rmse)
mean(kfold_results$test$rmse)
plot(m1)
summary(m1)
